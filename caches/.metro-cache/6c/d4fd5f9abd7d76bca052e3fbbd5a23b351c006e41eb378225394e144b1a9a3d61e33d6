{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"]}},{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"]}},{"name":"firebase/storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":68,"index":68}}],"key":"gnxuAFqfHppifCx3rWRGYoeEoGk=","exportNames":["*"]}},{"name":"../config/firebaseConfig","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":70},"end":{"line":2,"column":51,"index":121}}],"key":"c2ktbavwtrva9DBC5I1TB1Fz260=","exportNames":["*"]}},{"name":"expo-image-picker","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":123},"end":{"line":3,"column":49,"index":172}}],"key":"XQFgv2+WadF9xV+S67CI6D8lClA=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.uploadImage = exports.requestImagePermissions = exports.pickImage = void 0;\n  var _asyncToGenerator2 = _interopRequireDefault(require(_dependencyMap[1], \"@babel/runtime/helpers/asyncToGenerator\"));\n  var _storage = require(_dependencyMap[2], \"firebase/storage\");\n  var _firebaseConfig = require(_dependencyMap[3], \"../config/firebaseConfig\");\n  var ImagePicker = _interopRequireWildcard(require(_dependencyMap[4], \"expo-image-picker\"));\n  function _interopRequireWildcard(e, t) { if (\"function\" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function (e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || \"object\" != typeof e && \"function\" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (var _t in e) \"default\" !== _t && {}.hasOwnProperty.call(e, _t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t)) && (i.get || i.set) ? o(f, _t, i) : f[_t] = e[_t]); return f; })(e, t); }\n  /**\r\n   * Request camera roll permissions\r\n   * @returns {Promise<boolean>}\r\n   */\n  var requestImagePermissions = exports.requestImagePermissions = /*#__PURE__*/function () {\n    var _ref = (0, _asyncToGenerator2.default)(function* () {\n      try {\n        var _yield$ImagePicker$re = yield ImagePicker.requestMediaLibraryPermissionsAsync(),\n          status = _yield$ImagePicker$re.status;\n        if (status !== 'granted') {\n          alert('Sorry, we need camera roll permissions to upload images!');\n          return false;\n        }\n        return true;\n      } catch (error) {\n        console.error('Error requesting permissions:', error);\n        return false;\n      }\n    });\n    return function requestImagePermissions() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  /**\r\n   * Pick an image from gallery\r\n   * @returns {Promise<Object|null>} - Image object with uri, or null if cancelled\r\n   */\n  var pickImage = exports.pickImage = /*#__PURE__*/function () {\n    var _ref2 = (0, _asyncToGenerator2.default)(function* () {\n      try {\n        var hasPermission = yield requestImagePermissions();\n        if (!hasPermission) return null;\n        var result = yield ImagePicker.launchImageLibraryAsync({\n          mediaTypes: ImagePicker.MediaTypeOptions.Images,\n          allowsEditing: true,\n          aspect: [4, 3],\n          quality: 0.7 // Compress to reduce file size\n        });\n        if (!result.canceled && result.assets && result.assets.length > 0) {\n          return result.assets[0];\n        }\n        return null;\n      } catch (error) {\n        console.error('Error picking image:', error);\n        return null;\n      }\n    });\n    return function pickImage() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  /**\r\n   * Upload image to Firebase Storage\r\n   * @param {string} uri - Local image URI\r\n   * @param {string} folder - Storage folder (e.g., 'community_posts')\r\n   * @returns {Promise<string>} - Download URL of uploaded image\r\n   */\n  var uploadImage = exports.uploadImage = /*#__PURE__*/function () {\n    var _ref3 = (0, _asyncToGenerator2.default)(function* (uri) {\n      var folder = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'community_posts';\n      try {\n        if (!_firebaseConfig.storage) {\n          throw new Error('Firebase Storage is not initialized');\n        }\n\n        // Convert URI to blob\n        var response = yield fetch(uri);\n        var blob = yield response.blob();\n\n        // Create unique filename\n        var filename = `${folder}/${Date.now()}_${Math.random().toString(36).substring(7)}.jpg`;\n        var storageRef = (0, _storage.ref)(_firebaseConfig.storage, filename);\n        console.log('üì§ Uploading image to Firebase Storage...');\n\n        // Upload blob\n        yield (0, _storage.uploadBytes)(storageRef, blob);\n\n        // Get download URL\n        var downloadURL = yield (0, _storage.getDownloadURL)(storageRef);\n        console.log('‚úÖ Image uploaded successfully:', downloadURL);\n        return downloadURL;\n      } catch (error) {\n        console.error('‚ùå Error uploading image:', error);\n        throw error;\n      }\n    });\n    return function uploadImage(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n});","lineCount":104,"map":[[8,2,1,0],[8,6,1,0,"_storage"],[8,14,1,0],[8,17,1,0,"require"],[8,24,1,0],[8,25,1,0,"_dependencyMap"],[8,39,1,0],[9,2,2,0],[9,6,2,0,"_firebaseConfig"],[9,21,2,0],[9,24,2,0,"require"],[9,31,2,0],[9,32,2,0,"_dependencyMap"],[9,46,2,0],[10,2,3,0],[10,6,3,0,"ImagePicker"],[10,17,3,0],[10,20,3,0,"_interopRequireWildcard"],[10,43,3,0],[10,44,3,0,"require"],[10,51,3,0],[10,52,3,0,"_dependencyMap"],[10,66,3,0],[11,2,3,49],[11,11,3,49,"_interopRequireWildcard"],[11,35,3,49,"e"],[11,36,3,49],[11,38,3,49,"t"],[11,39,3,49],[11,68,3,49,"WeakMap"],[11,75,3,49],[11,81,3,49,"r"],[11,82,3,49],[11,89,3,49,"WeakMap"],[11,96,3,49],[11,100,3,49,"n"],[11,101,3,49],[11,108,3,49,"WeakMap"],[11,115,3,49],[11,127,3,49,"_interopRequireWildcard"],[11,150,3,49],[11,162,3,49,"_interopRequireWildcard"],[11,163,3,49,"e"],[11,164,3,49],[11,166,3,49,"t"],[11,167,3,49],[11,176,3,49,"t"],[11,177,3,49],[11,181,3,49,"e"],[11,182,3,49],[11,186,3,49,"e"],[11,187,3,49],[11,188,3,49,"__esModule"],[11,198,3,49],[11,207,3,49,"e"],[11,208,3,49],[11,214,3,49,"o"],[11,215,3,49],[11,217,3,49,"i"],[11,218,3,49],[11,220,3,49,"f"],[11,221,3,49],[11,226,3,49,"__proto__"],[11,235,3,49],[11,243,3,49,"default"],[11,250,3,49],[11,252,3,49,"e"],[11,253,3,49],[11,270,3,49,"e"],[11,271,3,49],[11,294,3,49,"e"],[11,295,3,49],[11,320,3,49,"e"],[11,321,3,49],[11,330,3,49,"f"],[11,331,3,49],[11,337,3,49,"o"],[11,338,3,49],[11,341,3,49,"t"],[11,342,3,49],[11,345,3,49,"n"],[11,346,3,49],[11,349,3,49,"r"],[11,350,3,49],[11,358,3,49,"o"],[11,359,3,49],[11,360,3,49,"has"],[11,363,3,49],[11,364,3,49,"e"],[11,365,3,49],[11,375,3,49,"o"],[11,376,3,49],[11,377,3,49,"get"],[11,380,3,49],[11,381,3,49,"e"],[11,382,3,49],[11,385,3,49,"o"],[11,386,3,49],[11,387,3,49,"set"],[11,390,3,49],[11,391,3,49,"e"],[11,392,3,49],[11,394,3,49,"f"],[11,395,3,49],[11,409,3,49,"_t"],[11,411,3,49],[11,415,3,49,"e"],[11,416,3,49],[11,432,3,49,"_t"],[11,434,3,49],[11,441,3,49,"hasOwnProperty"],[11,455,3,49],[11,456,3,49,"call"],[11,460,3,49],[11,461,3,49,"e"],[11,462,3,49],[11,464,3,49,"_t"],[11,466,3,49],[11,473,3,49,"i"],[11,474,3,49],[11,478,3,49,"o"],[11,479,3,49],[11,482,3,49,"Object"],[11,488,3,49],[11,489,3,49,"defineProperty"],[11,503,3,49],[11,508,3,49,"Object"],[11,514,3,49],[11,515,3,49,"getOwnPropertyDescriptor"],[11,539,3,49],[11,540,3,49,"e"],[11,541,3,49],[11,543,3,49,"_t"],[11,545,3,49],[11,552,3,49,"i"],[11,553,3,49],[11,554,3,49,"get"],[11,557,3,49],[11,561,3,49,"i"],[11,562,3,49],[11,563,3,49,"set"],[11,566,3,49],[11,570,3,49,"o"],[11,571,3,49],[11,572,3,49,"f"],[11,573,3,49],[11,575,3,49,"_t"],[11,577,3,49],[11,579,3,49,"i"],[11,580,3,49],[11,584,3,49,"f"],[11,585,3,49],[11,586,3,49,"_t"],[11,588,3,49],[11,592,3,49,"e"],[11,593,3,49],[11,594,3,49,"_t"],[11,596,3,49],[11,607,3,49,"f"],[11,608,3,49],[11,613,3,49,"e"],[11,614,3,49],[11,616,3,49,"t"],[11,617,3,49],[12,2,5,0],[13,0,6,0],[14,0,7,0],[15,0,8,0],[16,2,9,7],[16,6,9,13,"requestImagePermissions"],[16,29,9,36],[16,32,9,36,"exports"],[16,39,9,36],[16,40,9,36,"requestImagePermissions"],[16,63,9,36],[17,4,9,36],[17,8,9,36,"_ref"],[17,12,9,36],[17,19,9,36,"_asyncToGenerator2"],[17,37,9,36],[17,38,9,36,"default"],[17,45,9,36],[17,47,9,39],[17,60,9,51],[18,6,10,2],[18,10,10,6],[19,8,11,4],[19,12,11,4,"_yield$ImagePicker$re"],[19,33,11,4],[19,42,11,29,"ImagePicker"],[19,53,11,40],[19,54,11,41,"requestMediaLibraryPermissionsAsync"],[19,89,11,76],[19,90,11,77],[19,91,11,78],[20,10,11,12,"status"],[20,16,11,18],[20,19,11,18,"_yield$ImagePicker$re"],[20,40,11,18],[20,41,11,12,"status"],[20,47,11,18],[21,8,12,4],[21,12,12,8,"status"],[21,18,12,14],[21,23,12,19],[21,32,12,28],[21,34,12,30],[22,10,13,6,"alert"],[22,15,13,11],[22,16,13,12],[22,74,13,70],[22,75,13,71],[23,10,14,6],[23,17,14,13],[23,22,14,18],[24,8,15,4],[25,8,16,4],[25,15,16,11],[25,19,16,15],[26,6,17,2],[26,7,17,3],[26,8,17,4],[26,15,17,11,"error"],[26,20,17,16],[26,22,17,18],[27,8,18,4,"console"],[27,15,18,11],[27,16,18,12,"error"],[27,21,18,17],[27,22,18,18],[27,53,18,49],[27,55,18,51,"error"],[27,60,18,56],[27,61,18,57],[28,8,19,4],[28,15,19,11],[28,20,19,16],[29,6,20,2],[30,4,21,0],[30,5,21,1],[31,4,21,1],[31,20,9,13,"requestImagePermissions"],[31,43,9,36,"requestImagePermissions"],[31,44,9,36],[32,6,9,36],[32,13,9,36,"_ref"],[32,17,9,36],[32,18,9,36,"apply"],[32,23,9,36],[32,30,9,36,"arguments"],[32,39,9,36],[33,4,9,36],[34,2,9,36],[34,5,21,1],[36,2,23,0],[37,0,24,0],[38,0,25,0],[39,0,26,0],[40,2,27,7],[40,6,27,13,"pickImage"],[40,15,27,22],[40,18,27,22,"exports"],[40,25,27,22],[40,26,27,22,"pickImage"],[40,35,27,22],[41,4,27,22],[41,8,27,22,"_ref2"],[41,13,27,22],[41,20,27,22,"_asyncToGenerator2"],[41,38,27,22],[41,39,27,22,"default"],[41,46,27,22],[41,48,27,25],[41,61,27,37],[42,6,28,2],[42,10,28,6],[43,8,29,4],[43,12,29,10,"hasPermission"],[43,25,29,23],[43,34,29,32,"requestImagePermissions"],[43,57,29,55],[43,58,29,56],[43,59,29,57],[44,8,30,4],[44,12,30,8],[44,13,30,9,"hasPermission"],[44,26,30,22],[44,28,30,24],[44,35,30,31],[44,39,30,35],[45,8,32,4],[45,12,32,10,"result"],[45,18,32,16],[45,27,32,25,"ImagePicker"],[45,38,32,36],[45,39,32,37,"launchImageLibraryAsync"],[45,62,32,60],[45,63,32,61],[46,10,33,6,"mediaTypes"],[46,20,33,16],[46,22,33,18,"ImagePicker"],[46,33,33,29],[46,34,33,30,"MediaTypeOptions"],[46,50,33,46],[46,51,33,47,"Images"],[46,57,33,53],[47,10,34,6,"allowsEditing"],[47,23,34,19],[47,25,34,21],[47,29,34,25],[48,10,35,6,"aspect"],[48,16,35,12],[48,18,35,14],[48,19,35,15],[48,20,35,16],[48,22,35,18],[48,23,35,19],[48,24,35,20],[49,10,36,6,"quality"],[49,17,36,13],[49,19,36,15],[49,22,36,18],[49,23,36,20],[50,8,37,4],[50,9,37,5],[50,10,37,6],[51,8,39,4],[51,12,39,8],[51,13,39,9,"result"],[51,19,39,15],[51,20,39,16,"canceled"],[51,28,39,24],[51,32,39,28,"result"],[51,38,39,34],[51,39,39,35,"assets"],[51,45,39,41],[51,49,39,45,"result"],[51,55,39,51],[51,56,39,52,"assets"],[51,62,39,58],[51,63,39,59,"length"],[51,69,39,65],[51,72,39,68],[51,73,39,69],[51,75,39,71],[52,10,40,6],[52,17,40,13,"result"],[52,23,40,19],[52,24,40,20,"assets"],[52,30,40,26],[52,31,40,27],[52,32,40,28],[52,33,40,29],[53,8,41,4],[54,8,43,4],[54,15,43,11],[54,19,43,15],[55,6,44,2],[55,7,44,3],[55,8,44,4],[55,15,44,11,"error"],[55,20,44,16],[55,22,44,18],[56,8,45,4,"console"],[56,15,45,11],[56,16,45,12,"error"],[56,21,45,17],[56,22,45,18],[56,44,45,40],[56,46,45,42,"error"],[56,51,45,47],[56,52,45,48],[57,8,46,4],[57,15,46,11],[57,19,46,15],[58,6,47,2],[59,4,48,0],[59,5,48,1],[60,4,48,1],[60,20,27,13,"pickImage"],[60,29,27,22,"pickImage"],[60,30,27,22],[61,6,27,22],[61,13,27,22,"_ref2"],[61,18,27,22],[61,19,27,22,"apply"],[61,24,27,22],[61,31,27,22,"arguments"],[61,40,27,22],[62,4,27,22],[63,2,27,22],[63,5,48,1],[65,2,50,0],[66,0,51,0],[67,0,52,0],[68,0,53,0],[69,0,54,0],[70,0,55,0],[71,2,56,7],[71,6,56,13,"uploadImage"],[71,17,56,24],[71,20,56,24,"exports"],[71,27,56,24],[71,28,56,24,"uploadImage"],[71,39,56,24],[72,4,56,24],[72,8,56,24,"_ref3"],[72,13,56,24],[72,20,56,24,"_asyncToGenerator2"],[72,38,56,24],[72,39,56,24,"default"],[72,46,56,24],[72,48,56,27],[72,59,56,34,"uri"],[72,62,56,37],[72,64,56,70],[73,6,56,70],[73,10,56,39,"folder"],[73,16,56,45],[73,19,56,45,"arguments"],[73,28,56,45],[73,29,56,45,"length"],[73,35,56,45],[73,43,56,45,"arguments"],[73,52,56,45],[73,60,56,45,"undefined"],[73,69,56,45],[73,72,56,45,"arguments"],[73,81,56,45],[73,87,56,48],[73,104,56,65],[74,6,57,2],[74,10,57,6],[75,8,58,4],[75,12,58,8],[75,13,58,9,"storage"],[75,36,58,16],[75,38,58,18],[76,10,59,6],[76,16,59,12],[76,20,59,16,"Error"],[76,25,59,21],[76,26,59,22],[76,63,59,59],[76,64,59,60],[77,8,60,4],[79,8,62,4],[80,8,63,4],[80,12,63,10,"response"],[80,20,63,18],[80,29,63,27,"fetch"],[80,34,63,32],[80,35,63,33,"uri"],[80,38,63,36],[80,39,63,37],[81,8,64,4],[81,12,64,10,"blob"],[81,16,64,14],[81,25,64,23,"response"],[81,33,64,31],[81,34,64,32,"blob"],[81,38,64,36],[81,39,64,37],[81,40,64,38],[83,8,66,4],[84,8,67,4],[84,12,67,10,"filename"],[84,20,67,18],[84,23,67,21],[84,26,67,24,"folder"],[84,32,67,30],[84,36,67,34,"Date"],[84,40,67,38],[84,41,67,39,"now"],[84,44,67,42],[84,45,67,43],[84,46,67,44],[84,50,67,48,"Math"],[84,54,67,52],[84,55,67,53,"random"],[84,61,67,59],[84,62,67,60],[84,63,67,61],[84,64,67,62,"toString"],[84,72,67,70],[84,73,67,71],[84,75,67,73],[84,76,67,74],[84,77,67,75,"substring"],[84,86,67,84],[84,87,67,85],[84,88,67,86],[84,89,67,87],[84,95,67,93],[85,8,68,4],[85,12,68,10,"storageRef"],[85,22,68,20],[85,25,68,23],[85,29,68,23,"ref"],[85,41,68,26],[85,43,68,27,"storage"],[85,66,68,34],[85,68,68,36,"filename"],[85,76,68,44],[85,77,68,45],[86,8,70,4,"console"],[86,15,70,11],[86,16,70,12,"log"],[86,19,70,15],[86,20,70,16],[86,63,70,59],[86,64,70,60],[88,8,72,4],[89,8,73,4],[89,14,73,10],[89,18,73,10,"uploadBytes"],[89,38,73,21],[89,40,73,22,"storageRef"],[89,50,73,32],[89,52,73,34,"blob"],[89,56,73,38],[89,57,73,39],[91,8,75,4],[92,8,76,4],[92,12,76,10,"downloadURL"],[92,23,76,21],[92,32,76,30],[92,36,76,30,"getDownloadURL"],[92,59,76,44],[92,61,76,45,"storageRef"],[92,71,76,55],[92,72,76,56],[93,8,78,4,"console"],[93,15,78,11],[93,16,78,12,"log"],[93,19,78,15],[93,20,78,16],[93,52,78,48],[93,54,78,50,"downloadURL"],[93,65,78,61],[93,66,78,62],[94,8,79,4],[94,15,79,11,"downloadURL"],[94,26,79,22],[95,6,80,2],[95,7,80,3],[95,8,80,4],[95,15,80,11,"error"],[95,20,80,16],[95,22,80,18],[96,8,81,4,"console"],[96,15,81,11],[96,16,81,12,"error"],[96,21,81,17],[96,22,81,18],[96,48,81,44],[96,50,81,46,"error"],[96,55,81,51],[96,56,81,52],[97,8,82,4],[97,14,82,10,"error"],[97,19,82,15],[98,6,83,2],[99,4,84,0],[99,5,84,1],[100,4,84,1],[100,20,56,13,"uploadImage"],[100,31,56,24,"uploadImage"],[100,32,56,24,"_x"],[100,34,56,24],[101,6,56,24],[101,13,56,24,"_ref3"],[101,18,56,24],[101,19,56,24,"apply"],[101,24,56,24],[101,31,56,24,"arguments"],[101,40,56,24],[102,4,56,24],[103,2,56,24],[103,5,84,1],[104,0,84,2],[104,3]],"functionMap":{"names":["<global>","requestImagePermissions","pickImage","uploadImage"],"mappings":"AAA;uCCQ;CDY;yBEM;CFqB;2BGQ;CH4B"}},"type":"js/module"}]}