{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"]}},{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"]}},{"name":"firebase/firestore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":57,"index":57}}],"key":"n8ZdwTgQb9oFW01pH/SKxYwC/nA=","exportNames":["*"]}},{"name":"../config/firebaseConfig","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":59},"end":{"line":2,"column":46,"index":105}}],"key":"c2ktbavwtrva9DBC5I1TB1Fz260=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.updateUserDetails = exports.saveUserDetails = exports.getUserDetails = void 0;\n  var _asyncToGenerator2 = _interopRequireDefault(require(_dependencyMap[1], \"@babel/runtime/helpers/asyncToGenerator\"));\n  var _firestore = require(_dependencyMap[2], \"firebase/firestore\");\n  var _firebaseConfig = require(_dependencyMap[3], \"../config/firebaseConfig\");\n  /**\r\n   * Save user details to Firestore\r\n   * @param {string} uid - User ID from Firebase Auth\r\n   * @param {Object} userData - User data object\r\n   * @returns {Promise<void>}\r\n   */\n  var saveUserDetails = exports.saveUserDetails = /*#__PURE__*/function () {\n    var _ref = (0, _asyncToGenerator2.default)(function* (uid, userData) {\n      try {\n        var userRef = (0, _firestore.doc)(_firebaseConfig.db, 'users', uid);\n        yield (0, _firestore.setDoc)(userRef, {\n          name: userData.name,\n          address: userData.address,\n          occupation: userData.occupation,\n          emergencyContacts: userData.emergencyContacts,\n          createdAt: new Date().toISOString(),\n          updatedAt: new Date().toISOString()\n        });\n        console.log('User details saved successfully');\n      } catch (error) {\n        console.error('Error saving user details:', error);\n\n        // Provide helpful error messages\n        if (error.code === 'unavailable') {\n          throw new Error('Cannot connect to Firestore. Please check your internet connection and ensure Firestore is enabled in Firebase Console.');\n        } else if (error.code === 'permission-denied') {\n          throw new Error('Permission denied. Please check Firestore security rules.');\n        }\n        throw error;\n      }\n    });\n    return function saveUserDetails(_x, _x2) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  /**\r\n   * Get user details from Firestore\r\n   * @param {string} uid - User ID from Firebase Auth\r\n   * @returns {Promise<Object|null>}\r\n   */\n  var getUserDetails = exports.getUserDetails = /*#__PURE__*/function () {\n    var _ref2 = (0, _asyncToGenerator2.default)(function* (uid) {\n      try {\n        var userRef = (0, _firestore.doc)(_firebaseConfig.db, 'users', uid);\n        var userSnap = yield (0, _firestore.getDoc)(userRef);\n        if (userSnap.exists()) {\n          console.log('User details retrieved successfully');\n          return userSnap.data();\n        } else {\n          console.log('No user details found for uid:', uid);\n          return null;\n        }\n      } catch (error) {\n        console.error('Error getting user details:', error);\n\n        // Handle offline/connection errors gracefully\n        if (error.code === 'unavailable') {\n          console.warn('Firestore unavailable - user may be offline or Firestore not enabled');\n          return null; // Return null instead of throwing to allow app to continue\n        } else if (error.code === 'permission-denied') {\n          console.error('Permission denied when fetching user details');\n          return null;\n        }\n\n        // For other errors, return null to allow graceful degradation\n        return null;\n      }\n    });\n    return function getUserDetails(_x3) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  /**\r\n   * Update user details in Firestore\r\n   * @param {string} uid - User ID from Firebase Auth\r\n   * @param {Object} userData - User data object to update\r\n   * @returns {Promise<void>}\r\n   */\n  var updateUserDetails = exports.updateUserDetails = /*#__PURE__*/function () {\n    var _ref3 = (0, _asyncToGenerator2.default)(function* (uid, userData) {\n      try {\n        var userRef = (0, _firestore.doc)(_firebaseConfig.db, 'users', uid);\n        yield (0, _firestore.setDoc)(userRef, {\n          ...userData,\n          updatedAt: new Date().toISOString()\n        }, {\n          merge: true\n        });\n        console.log('User details updated successfully');\n      } catch (error) {\n        console.error('Error updating user details:', error);\n\n        // Provide helpful error messages\n        if (error.code === 'unavailable') {\n          throw new Error('Cannot connect to Firestore. Please check your internet connection.');\n        } else if (error.code === 'permission-denied') {\n          throw new Error('Permission denied. Please check Firestore security rules.');\n        }\n        throw error;\n      }\n    });\n    return function updateUserDetails(_x4, _x5) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n});","lineCount":117,"map":[[8,2,1,0],[8,6,1,0,"_firestore"],[8,16,1,0],[8,19,1,0,"require"],[8,26,1,0],[8,27,1,0,"_dependencyMap"],[8,41,1,0],[9,2,2,0],[9,6,2,0,"_firebaseConfig"],[9,21,2,0],[9,24,2,0,"require"],[9,31,2,0],[9,32,2,0,"_dependencyMap"],[9,46,2,0],[10,2,4,0],[11,0,5,0],[12,0,6,0],[13,0,7,0],[14,0,8,0],[15,0,9,0],[16,2,10,7],[16,6,10,13,"saveUserDetails"],[16,21,10,28],[16,24,10,28,"exports"],[16,31,10,28],[16,32,10,28,"saveUserDetails"],[16,47,10,28],[17,4,10,28],[17,8,10,28,"_ref"],[17,12,10,28],[17,19,10,28,"_asyncToGenerator2"],[17,37,10,28],[17,38,10,28,"default"],[17,45,10,28],[17,47,10,31],[17,58,10,38,"uid"],[17,61,10,41],[17,63,10,43,"userData"],[17,71,10,51],[17,73,10,56],[18,6,11,2],[18,10,11,6],[19,8,12,4],[19,12,12,10,"userRef"],[19,19,12,17],[19,22,12,20],[19,26,12,20,"doc"],[19,40,12,23],[19,42,12,24,"db"],[19,60,12,26],[19,62,12,28],[19,69,12,35],[19,71,12,37,"uid"],[19,74,12,40],[19,75,12,41],[20,8,13,4],[20,14,13,10],[20,18,13,10,"setDoc"],[20,35,13,16],[20,37,13,17,"userRef"],[20,44,13,24],[20,46,13,26],[21,10,14,6,"name"],[21,14,14,10],[21,16,14,12,"userData"],[21,24,14,20],[21,25,14,21,"name"],[21,29,14,25],[22,10,15,6,"address"],[22,17,15,13],[22,19,15,15,"userData"],[22,27,15,23],[22,28,15,24,"address"],[22,35,15,31],[23,10,16,6,"occupation"],[23,20,16,16],[23,22,16,18,"userData"],[23,30,16,26],[23,31,16,27,"occupation"],[23,41,16,37],[24,10,17,6,"emergencyContacts"],[24,27,17,23],[24,29,17,25,"userData"],[24,37,17,33],[24,38,17,34,"emergencyContacts"],[24,55,17,51],[25,10,18,6,"createdAt"],[25,19,18,15],[25,21,18,17],[25,25,18,21,"Date"],[25,29,18,25],[25,30,18,26],[25,31,18,27],[25,32,18,28,"toISOString"],[25,43,18,39],[25,44,18,40],[25,45,18,41],[26,10,19,6,"updatedAt"],[26,19,19,15],[26,21,19,17],[26,25,19,21,"Date"],[26,29,19,25],[26,30,19,26],[26,31,19,27],[26,32,19,28,"toISOString"],[26,43,19,39],[26,44,19,40],[27,8,20,4],[27,9,20,5],[27,10,20,6],[28,8,21,4,"console"],[28,15,21,11],[28,16,21,12,"log"],[28,19,21,15],[28,20,21,16],[28,53,21,49],[28,54,21,50],[29,6,22,2],[29,7,22,3],[29,8,22,4],[29,15,22,11,"error"],[29,20,22,16],[29,22,22,18],[30,8,23,4,"console"],[30,15,23,11],[30,16,23,12,"error"],[30,21,23,17],[30,22,23,18],[30,50,23,46],[30,52,23,48,"error"],[30,57,23,53],[30,58,23,54],[32,8,25,4],[33,8,26,4],[33,12,26,8,"error"],[33,17,26,13],[33,18,26,14,"code"],[33,22,26,18],[33,27,26,23],[33,40,26,36],[33,42,26,38],[34,10,27,6],[34,16,27,12],[34,20,27,16,"Error"],[34,25,27,21],[34,26,27,22],[34,147,27,143],[34,148,27,144],[35,8,28,4],[35,9,28,5],[35,15,28,11],[35,19,28,15,"error"],[35,24,28,20],[35,25,28,21,"code"],[35,29,28,25],[35,34,28,30],[35,53,28,49],[35,55,28,51],[36,10,29,6],[36,16,29,12],[36,20,29,16,"Error"],[36,25,29,21],[36,26,29,22],[36,85,29,81],[36,86,29,82],[37,8,30,4],[38,8,32,4],[38,14,32,10,"error"],[38,19,32,15],[39,6,33,2],[40,4,34,0],[40,5,34,1],[41,4,34,1],[41,20,10,13,"saveUserDetails"],[41,35,10,28,"saveUserDetails"],[41,36,10,28,"_x"],[41,38,10,28],[41,40,10,28,"_x2"],[41,43,10,28],[42,6,10,28],[42,13,10,28,"_ref"],[42,17,10,28],[42,18,10,28,"apply"],[42,23,10,28],[42,30,10,28,"arguments"],[42,39,10,28],[43,4,10,28],[44,2,10,28],[44,5,34,1],[46,2,36,0],[47,0,37,0],[48,0,38,0],[49,0,39,0],[50,0,40,0],[51,2,41,7],[51,6,41,13,"getUserDetails"],[51,20,41,27],[51,23,41,27,"exports"],[51,30,41,27],[51,31,41,27,"getUserDetails"],[51,45,41,27],[52,4,41,27],[52,8,41,27,"_ref2"],[52,13,41,27],[52,20,41,27,"_asyncToGenerator2"],[52,38,41,27],[52,39,41,27,"default"],[52,46,41,27],[52,48,41,30],[52,59,41,37,"uid"],[52,62,41,40],[52,64,41,45],[53,6,42,2],[53,10,42,6],[54,8,43,4],[54,12,43,10,"userRef"],[54,19,43,17],[54,22,43,20],[54,26,43,20,"doc"],[54,40,43,23],[54,42,43,24,"db"],[54,60,43,26],[54,62,43,28],[54,69,43,35],[54,71,43,37,"uid"],[54,74,43,40],[54,75,43,41],[55,8,44,4],[55,12,44,10,"userSnap"],[55,20,44,18],[55,29,44,27],[55,33,44,27,"getDoc"],[55,50,44,33],[55,52,44,34,"userRef"],[55,59,44,41],[55,60,44,42],[56,8,46,4],[56,12,46,8,"userSnap"],[56,20,46,16],[56,21,46,17,"exists"],[56,27,46,23],[56,28,46,24],[56,29,46,25],[56,31,46,27],[57,10,47,6,"console"],[57,17,47,13],[57,18,47,14,"log"],[57,21,47,17],[57,22,47,18],[57,59,47,55],[57,60,47,56],[58,10,48,6],[58,17,48,13,"userSnap"],[58,25,48,21],[58,26,48,22,"data"],[58,30,48,26],[58,31,48,27],[58,32,48,28],[59,8,49,4],[59,9,49,5],[59,15,49,11],[60,10,50,6,"console"],[60,17,50,13],[60,18,50,14,"log"],[60,21,50,17],[60,22,50,18],[60,54,50,50],[60,56,50,52,"uid"],[60,59,50,55],[60,60,50,56],[61,10,51,6],[61,17,51,13],[61,21,51,17],[62,8,52,4],[63,6,53,2],[63,7,53,3],[63,8,53,4],[63,15,53,11,"error"],[63,20,53,16],[63,22,53,18],[64,8,54,4,"console"],[64,15,54,11],[64,16,54,12,"error"],[64,21,54,17],[64,22,54,18],[64,51,54,47],[64,53,54,49,"error"],[64,58,54,54],[64,59,54,55],[66,8,56,4],[67,8,57,4],[67,12,57,8,"error"],[67,17,57,13],[67,18,57,14,"code"],[67,22,57,18],[67,27,57,23],[67,40,57,36],[67,42,57,38],[68,10,58,6,"console"],[68,17,58,13],[68,18,58,14,"warn"],[68,22,58,18],[68,23,58,19],[68,93,58,89],[68,94,58,90],[69,10,59,6],[69,17,59,13],[69,21,59,17],[69,22,59,18],[69,23,59,19],[70,8,60,4],[70,9,60,5],[70,15,60,11],[70,19,60,15,"error"],[70,24,60,20],[70,25,60,21,"code"],[70,29,60,25],[70,34,60,30],[70,53,60,49],[70,55,60,51],[71,10,61,6,"console"],[71,17,61,13],[71,18,61,14,"error"],[71,23,61,19],[71,24,61,20],[71,70,61,66],[71,71,61,67],[72,10,62,6],[72,17,62,13],[72,21,62,17],[73,8,63,4],[75,8,65,4],[76,8,66,4],[76,15,66,11],[76,19,66,15],[77,6,67,2],[78,4,68,0],[78,5,68,1],[79,4,68,1],[79,20,41,13,"getUserDetails"],[79,34,41,27,"getUserDetails"],[79,35,41,27,"_x3"],[79,38,41,27],[80,6,41,27],[80,13,41,27,"_ref2"],[80,18,41,27],[80,19,41,27,"apply"],[80,24,41,27],[80,31,41,27,"arguments"],[80,40,41,27],[81,4,41,27],[82,2,41,27],[82,5,68,1],[84,2,70,0],[85,0,71,0],[86,0,72,0],[87,0,73,0],[88,0,74,0],[89,0,75,0],[90,2,76,7],[90,6,76,13,"updateUserDetails"],[90,23,76,30],[90,26,76,30,"exports"],[90,33,76,30],[90,34,76,30,"updateUserDetails"],[90,51,76,30],[91,4,76,30],[91,8,76,30,"_ref3"],[91,13,76,30],[91,20,76,30,"_asyncToGenerator2"],[91,38,76,30],[91,39,76,30,"default"],[91,46,76,30],[91,48,76,33],[91,59,76,40,"uid"],[91,62,76,43],[91,64,76,45,"userData"],[91,72,76,53],[91,74,76,58],[92,6,77,2],[92,10,77,6],[93,8,78,4],[93,12,78,10,"userRef"],[93,19,78,17],[93,22,78,20],[93,26,78,20,"doc"],[93,40,78,23],[93,42,78,24,"db"],[93,60,78,26],[93,62,78,28],[93,69,78,35],[93,71,78,37,"uid"],[93,74,78,40],[93,75,78,41],[94,8,79,4],[94,14,79,10],[94,18,79,10,"setDoc"],[94,35,79,16],[94,37,79,17,"userRef"],[94,44,79,24],[94,46,79,26],[95,10,80,6],[95,13,80,9,"userData"],[95,21,80,17],[96,10,81,6,"updatedAt"],[96,19,81,15],[96,21,81,17],[96,25,81,21,"Date"],[96,29,81,25],[96,30,81,26],[96,31,81,27],[96,32,81,28,"toISOString"],[96,43,81,39],[96,44,81,40],[97,8,82,4],[97,9,82,5],[97,11,82,7],[98,10,82,9,"merge"],[98,15,82,14],[98,17,82,16],[99,8,82,21],[99,9,82,22],[99,10,82,23],[100,8,83,4,"console"],[100,15,83,11],[100,16,83,12,"log"],[100,19,83,15],[100,20,83,16],[100,55,83,51],[100,56,83,52],[101,6,84,2],[101,7,84,3],[101,8,84,4],[101,15,84,11,"error"],[101,20,84,16],[101,22,84,18],[102,8,85,4,"console"],[102,15,85,11],[102,16,85,12,"error"],[102,21,85,17],[102,22,85,18],[102,52,85,48],[102,54,85,50,"error"],[102,59,85,55],[102,60,85,56],[104,8,87,4],[105,8,88,4],[105,12,88,8,"error"],[105,17,88,13],[105,18,88,14,"code"],[105,22,88,18],[105,27,88,23],[105,40,88,36],[105,42,88,38],[106,10,89,6],[106,16,89,12],[106,20,89,16,"Error"],[106,25,89,21],[106,26,89,22],[106,95,89,91],[106,96,89,92],[107,8,90,4],[107,9,90,5],[107,15,90,11],[107,19,90,15,"error"],[107,24,90,20],[107,25,90,21,"code"],[107,29,90,25],[107,34,90,30],[107,53,90,49],[107,55,90,51],[108,10,91,6],[108,16,91,12],[108,20,91,16,"Error"],[108,25,91,21],[108,26,91,22],[108,85,91,81],[108,86,91,82],[109,8,92,4],[110,8,94,4],[110,14,94,10,"error"],[110,19,94,15],[111,6,95,2],[112,4,96,0],[112,5,96,1],[113,4,96,1],[113,20,76,13,"updateUserDetails"],[113,37,76,30,"updateUserDetails"],[113,38,76,30,"_x4"],[113,41,76,30],[113,43,76,30,"_x5"],[113,46,76,30],[114,6,76,30],[114,13,76,30,"_ref3"],[114,18,76,30],[114,19,76,30,"apply"],[114,24,76,30],[114,31,76,30,"arguments"],[114,40,76,30],[115,4,76,30],[116,2,76,30],[116,5,96,1],[117,0,96,2],[117,3]],"functionMap":{"names":["<global>","saveUserDetails","getUserDetails","updateUserDetails"],"mappings":"AAA;+BCS;CDwB;8BEO;CF2B;iCGQ;CHoB"}},"type":"js/module"}]}