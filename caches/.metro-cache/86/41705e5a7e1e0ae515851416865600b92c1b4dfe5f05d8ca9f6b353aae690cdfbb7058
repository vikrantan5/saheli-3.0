{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"]}},{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"]}},{"name":"firebase/firestore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":57,"index":57}}],"key":"n8ZdwTgQb9oFW01pH/SKxYwC/nA=","exportNames":["*"]}},{"name":"../config/firebaseConfig","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":59},"end":{"line":2,"column":46,"index":105}}],"key":"c2ktbavwtrva9DBC5I1TB1Fz260=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.updateUserDetails = exports.setUserRole = exports.saveUserDetails = exports.getUserDetails = void 0;\n  var _asyncToGenerator2 = _interopRequireDefault(require(_dependencyMap[1], \"@babel/runtime/helpers/asyncToGenerator\"));\n  var _firestore = require(_dependencyMap[2], \"firebase/firestore\");\n  var _firebaseConfig = require(_dependencyMap[3], \"../config/firebaseConfig\");\n  /**\r\n   * Save user details to Firestore\r\n   * @param {string} uid - User ID from Firebase Auth\r\n   * @param {Object} userData - User data object\r\n   * @returns {Promise<void>}\r\n   */\n  var saveUserDetails = exports.saveUserDetails = /*#__PURE__*/function () {\n    var _ref = (0, _asyncToGenerator2.default)(function* (uid, userData) {\n      try {\n        console.log('üíæ Attempting to save user details to Firestore...');\n        console.log('UID:', uid);\n        console.log('Data:', userData);\n        var userRef = (0, _firestore.doc)(_firebaseConfig.db, 'users', uid);\n        yield (0, _firestore.setDoc)(userRef, {\n          name: userData.name,\n          address: userData.address,\n          occupation: userData.occupation,\n          emergencyContacts: userData.emergencyContacts,\n          createdAt: new Date().toISOString(),\n          updatedAt: new Date().toISOString()\n        });\n        console.log('‚úÖ User details saved successfully to Firestore!');\n      } catch (error) {\n        console.error('‚ùå Error saving user details:', error);\n        console.error('Error code:', error.code);\n        console.error('Error message:', error.message);\n\n        // Provide helpful error messages\n        if (error.code === 'unavailable') {\n          throw new Error('Cannot connect to Firestore. Please check your internet connection and ensure Firestore is enabled in Firebase Console.');\n        } else if (error.code === 'permission-denied') {\n          throw new Error('Permission denied. Please check Firestore security rules.');\n        }\n        throw error;\n      }\n    });\n    return function saveUserDetails(_x, _x2) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  /**\r\n   * Get user details from Firestore\r\n   * @param {string} uid - User ID from Firebase Auth\r\n   * @returns {Promise<Object|null>}\r\n   */\n  var getUserDetails = exports.getUserDetails = /*#__PURE__*/function () {\n    var _ref2 = (0, _asyncToGenerator2.default)(function* (uid) {\n      try {\n        var userRef = (0, _firestore.doc)(_firebaseConfig.db, 'users', uid);\n        var userSnap = yield (0, _firestore.getDoc)(userRef);\n        if (userSnap.exists()) {\n          console.log('User details retrieved successfully');\n          return userSnap.data();\n        } else {\n          console.log('No user details found for uid:', uid);\n          return null;\n        }\n      } catch (error) {\n        console.error('Error getting user details:', error);\n\n        // Handle offline/connection errors gracefully\n        if (error.code === 'unavailable') {\n          console.warn('Firestore unavailable - user may be offline or Firestore not enabled');\n          return null; // Return null instead of throwing to allow app to continue\n        } else if (error.code === 'permission-denied') {\n          console.error('Permission denied when fetching user details');\n          return null;\n        }\n\n        // For other errors, return null to allow graceful degradation\n        return null;\n      }\n    });\n    return function getUserDetails(_x3) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  /**\r\n   * Update user details in Firestore\r\n   * @param {string} uid - User ID from Firebase Auth\r\n   * @param {Object} userData - User data object to update\r\n   * @returns {Promise<void>}\r\n   */\n  var updateUserDetails = exports.updateUserDetails = /*#__PURE__*/function () {\n    var _ref3 = (0, _asyncToGenerator2.default)(function* (uid, userData) {\n      try {\n        var userRef = (0, _firestore.doc)(_firebaseConfig.db, 'users', uid);\n        yield (0, _firestore.setDoc)(userRef, {\n          ...userData,\n          updatedAt: new Date().toISOString()\n        }, {\n          merge: true\n        });\n        console.log('User details updated successfully');\n      } catch (error) {\n        console.error('Error updating user details:', error);\n\n        // Provide helpful error messages\n        if (error.code === 'unavailable') {\n          throw new Error('Cannot connect to Firestore. Please check your internet connection.');\n        } else if (error.code === 'permission-denied') {\n          throw new Error('Permission denied. Please check Firestore security rules.');\n        }\n        throw error;\n      }\n    });\n    return function updateUserDetails(_x4, _x5) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  /**\r\n   * Set user role (admin or user)\r\n   * @param {string} uid - User ID from Firebase Auth\r\n   * @param {string} role - Role ('admin' or 'user')\r\n   * @returns {Promise<void>}\r\n   */\n  var setUserRole = exports.setUserRole = /*#__PURE__*/function () {\n    var _ref4 = (0, _asyncToGenerator2.default)(function* (uid, role) {\n      try {\n        var userRef = (0, _firestore.doc)(_firebaseConfig.db, 'users', uid);\n        yield (0, _firestore.setDoc)(userRef, {\n          role: role,\n          updatedAt: new Date().toISOString()\n        }, {\n          merge: true\n        });\n        console.log('User role updated successfully to:', role);\n      } catch (error) {\n        console.error('Error setting user role:', error);\n        throw error;\n      }\n    });\n    return function setUserRole(_x6, _x7) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n});","lineCount":149,"map":[[8,2,1,0],[8,6,1,0,"_firestore"],[8,16,1,0],[8,19,1,0,"require"],[8,26,1,0],[8,27,1,0,"_dependencyMap"],[8,41,1,0],[9,2,2,0],[9,6,2,0,"_firebaseConfig"],[9,21,2,0],[9,24,2,0,"require"],[9,31,2,0],[9,32,2,0,"_dependencyMap"],[9,46,2,0],[10,2,4,0],[11,0,5,0],[12,0,6,0],[13,0,7,0],[14,0,8,0],[15,0,9,0],[16,2,10,7],[16,6,10,13,"saveUserDetails"],[16,21,10,28],[16,24,10,28,"exports"],[16,31,10,28],[16,32,10,28,"saveUserDetails"],[16,47,10,28],[17,4,10,28],[17,8,10,28,"_ref"],[17,12,10,28],[17,19,10,28,"_asyncToGenerator2"],[17,37,10,28],[17,38,10,28,"default"],[17,45,10,28],[17,47,10,31],[17,58,10,38,"uid"],[17,61,10,41],[17,63,10,43,"userData"],[17,71,10,51],[17,73,10,56],[18,6,11,2],[18,10,11,6],[19,8,12,4,"console"],[19,15,12,11],[19,16,12,12,"log"],[19,19,12,15],[19,20,12,16],[19,72,12,68],[19,73,12,69],[20,8,13,4,"console"],[20,15,13,11],[20,16,13,12,"log"],[20,19,13,15],[20,20,13,16],[20,26,13,22],[20,28,13,24,"uid"],[20,31,13,27],[20,32,13,28],[21,8,14,4,"console"],[21,15,14,11],[21,16,14,12,"log"],[21,19,14,15],[21,20,14,16],[21,27,14,23],[21,29,14,25,"userData"],[21,37,14,33],[21,38,14,34],[22,8,16,4],[22,12,16,10,"userRef"],[22,19,16,17],[22,22,16,20],[22,26,16,20,"doc"],[22,40,16,23],[22,42,16,24,"db"],[22,60,16,26],[22,62,16,28],[22,69,16,35],[22,71,16,37,"uid"],[22,74,16,40],[22,75,16,41],[23,8,17,4],[23,14,17,10],[23,18,17,10,"setDoc"],[23,35,17,16],[23,37,17,17,"userRef"],[23,44,17,24],[23,46,17,26],[24,10,18,6,"name"],[24,14,18,10],[24,16,18,12,"userData"],[24,24,18,20],[24,25,18,21,"name"],[24,29,18,25],[25,10,19,6,"address"],[25,17,19,13],[25,19,19,15,"userData"],[25,27,19,23],[25,28,19,24,"address"],[25,35,19,31],[26,10,20,6,"occupation"],[26,20,20,16],[26,22,20,18,"userData"],[26,30,20,26],[26,31,20,27,"occupation"],[26,41,20,37],[27,10,21,6,"emergencyContacts"],[27,27,21,23],[27,29,21,25,"userData"],[27,37,21,33],[27,38,21,34,"emergencyContacts"],[27,55,21,51],[28,10,22,6,"createdAt"],[28,19,22,15],[28,21,22,17],[28,25,22,21,"Date"],[28,29,22,25],[28,30,22,26],[28,31,22,27],[28,32,22,28,"toISOString"],[28,43,22,39],[28,44,22,40],[28,45,22,41],[29,10,23,6,"updatedAt"],[29,19,23,15],[29,21,23,17],[29,25,23,21,"Date"],[29,29,23,25],[29,30,23,26],[29,31,23,27],[29,32,23,28,"toISOString"],[29,43,23,39],[29,44,23,40],[30,8,24,4],[30,9,24,5],[30,10,24,6],[31,8,26,4,"console"],[31,15,26,11],[31,16,26,12,"log"],[31,19,26,15],[31,20,26,16],[31,69,26,65],[31,70,26,66],[32,6,27,2],[32,7,27,3],[32,8,27,4],[32,15,27,11,"error"],[32,20,27,16],[32,22,27,18],[33,8,28,4,"console"],[33,15,28,11],[33,16,28,12,"error"],[33,21,28,17],[33,22,28,18],[33,52,28,48],[33,54,28,50,"error"],[33,59,28,55],[33,60,28,56],[34,8,29,4,"console"],[34,15,29,11],[34,16,29,12,"error"],[34,21,29,17],[34,22,29,18],[34,35,29,31],[34,37,29,33,"error"],[34,42,29,38],[34,43,29,39,"code"],[34,47,29,43],[34,48,29,44],[35,8,30,4,"console"],[35,15,30,11],[35,16,30,12,"error"],[35,21,30,17],[35,22,30,18],[35,38,30,34],[35,40,30,36,"error"],[35,45,30,41],[35,46,30,42,"message"],[35,53,30,49],[35,54,30,50],[37,8,32,4],[38,8,33,4],[38,12,33,8,"error"],[38,17,33,13],[38,18,33,14,"code"],[38,22,33,18],[38,27,33,23],[38,40,33,36],[38,42,33,38],[39,10,34,6],[39,16,34,12],[39,20,34,16,"Error"],[39,25,34,21],[39,26,34,22],[39,147,34,143],[39,148,34,144],[40,8,35,4],[40,9,35,5],[40,15,35,11],[40,19,35,15,"error"],[40,24,35,20],[40,25,35,21,"code"],[40,29,35,25],[40,34,35,30],[40,53,35,49],[40,55,35,51],[41,10,36,6],[41,16,36,12],[41,20,36,16,"Error"],[41,25,36,21],[41,26,36,22],[41,85,36,81],[41,86,36,82],[42,8,37,4],[43,8,39,4],[43,14,39,10,"error"],[43,19,39,15],[44,6,40,2],[45,4,41,0],[45,5,41,1],[46,4,41,1],[46,20,10,13,"saveUserDetails"],[46,35,10,28,"saveUserDetails"],[46,36,10,28,"_x"],[46,38,10,28],[46,40,10,28,"_x2"],[46,43,10,28],[47,6,10,28],[47,13,10,28,"_ref"],[47,17,10,28],[47,18,10,28,"apply"],[47,23,10,28],[47,30,10,28,"arguments"],[47,39,10,28],[48,4,10,28],[49,2,10,28],[49,5,41,1],[51,2,43,0],[52,0,44,0],[53,0,45,0],[54,0,46,0],[55,0,47,0],[56,2,48,7],[56,6,48,13,"getUserDetails"],[56,20,48,27],[56,23,48,27,"exports"],[56,30,48,27],[56,31,48,27,"getUserDetails"],[56,45,48,27],[57,4,48,27],[57,8,48,27,"_ref2"],[57,13,48,27],[57,20,48,27,"_asyncToGenerator2"],[57,38,48,27],[57,39,48,27,"default"],[57,46,48,27],[57,48,48,30],[57,59,48,37,"uid"],[57,62,48,40],[57,64,48,45],[58,6,49,2],[58,10,49,6],[59,8,50,4],[59,12,50,10,"userRef"],[59,19,50,17],[59,22,50,20],[59,26,50,20,"doc"],[59,40,50,23],[59,42,50,24,"db"],[59,60,50,26],[59,62,50,28],[59,69,50,35],[59,71,50,37,"uid"],[59,74,50,40],[59,75,50,41],[60,8,51,4],[60,12,51,10,"userSnap"],[60,20,51,18],[60,29,51,27],[60,33,51,27,"getDoc"],[60,50,51,33],[60,52,51,34,"userRef"],[60,59,51,41],[60,60,51,42],[61,8,53,4],[61,12,53,8,"userSnap"],[61,20,53,16],[61,21,53,17,"exists"],[61,27,53,23],[61,28,53,24],[61,29,53,25],[61,31,53,27],[62,10,54,6,"console"],[62,17,54,13],[62,18,54,14,"log"],[62,21,54,17],[62,22,54,18],[62,59,54,55],[62,60,54,56],[63,10,55,6],[63,17,55,13,"userSnap"],[63,25,55,21],[63,26,55,22,"data"],[63,30,55,26],[63,31,55,27],[63,32,55,28],[64,8,56,4],[64,9,56,5],[64,15,56,11],[65,10,57,6,"console"],[65,17,57,13],[65,18,57,14,"log"],[65,21,57,17],[65,22,57,18],[65,54,57,50],[65,56,57,52,"uid"],[65,59,57,55],[65,60,57,56],[66,10,58,6],[66,17,58,13],[66,21,58,17],[67,8,59,4],[68,6,60,2],[68,7,60,3],[68,8,60,4],[68,15,60,11,"error"],[68,20,60,16],[68,22,60,18],[69,8,61,4,"console"],[69,15,61,11],[69,16,61,12,"error"],[69,21,61,17],[69,22,61,18],[69,51,61,47],[69,53,61,49,"error"],[69,58,61,54],[69,59,61,55],[71,8,63,4],[72,8,64,4],[72,12,64,8,"error"],[72,17,64,13],[72,18,64,14,"code"],[72,22,64,18],[72,27,64,23],[72,40,64,36],[72,42,64,38],[73,10,65,6,"console"],[73,17,65,13],[73,18,65,14,"warn"],[73,22,65,18],[73,23,65,19],[73,93,65,89],[73,94,65,90],[74,10,66,6],[74,17,66,13],[74,21,66,17],[74,22,66,18],[74,23,66,19],[75,8,67,4],[75,9,67,5],[75,15,67,11],[75,19,67,15,"error"],[75,24,67,20],[75,25,67,21,"code"],[75,29,67,25],[75,34,67,30],[75,53,67,49],[75,55,67,51],[76,10,68,6,"console"],[76,17,68,13],[76,18,68,14,"error"],[76,23,68,19],[76,24,68,20],[76,70,68,66],[76,71,68,67],[77,10,69,6],[77,17,69,13],[77,21,69,17],[78,8,70,4],[80,8,72,4],[81,8,73,4],[81,15,73,11],[81,19,73,15],[82,6,74,2],[83,4,75,0],[83,5,75,1],[84,4,75,1],[84,20,48,13,"getUserDetails"],[84,34,48,27,"getUserDetails"],[84,35,48,27,"_x3"],[84,38,48,27],[85,6,48,27],[85,13,48,27,"_ref2"],[85,18,48,27],[85,19,48,27,"apply"],[85,24,48,27],[85,31,48,27,"arguments"],[85,40,48,27],[86,4,48,27],[87,2,48,27],[87,5,75,1],[89,2,77,0],[90,0,78,0],[91,0,79,0],[92,0,80,0],[93,0,81,0],[94,0,82,0],[95,2,83,7],[95,6,83,13,"updateUserDetails"],[95,23,83,30],[95,26,83,30,"exports"],[95,33,83,30],[95,34,83,30,"updateUserDetails"],[95,51,83,30],[96,4,83,30],[96,8,83,30,"_ref3"],[96,13,83,30],[96,20,83,30,"_asyncToGenerator2"],[96,38,83,30],[96,39,83,30,"default"],[96,46,83,30],[96,48,83,33],[96,59,83,40,"uid"],[96,62,83,43],[96,64,83,45,"userData"],[96,72,83,53],[96,74,83,58],[97,6,84,2],[97,10,84,6],[98,8,85,4],[98,12,85,10,"userRef"],[98,19,85,17],[98,22,85,20],[98,26,85,20,"doc"],[98,40,85,23],[98,42,85,24,"db"],[98,60,85,26],[98,62,85,28],[98,69,85,35],[98,71,85,37,"uid"],[98,74,85,40],[98,75,85,41],[99,8,86,4],[99,14,86,10],[99,18,86,10,"setDoc"],[99,35,86,16],[99,37,86,17,"userRef"],[99,44,86,24],[99,46,86,26],[100,10,87,6],[100,13,87,9,"userData"],[100,21,87,17],[101,10,88,6,"updatedAt"],[101,19,88,15],[101,21,88,17],[101,25,88,21,"Date"],[101,29,88,25],[101,30,88,26],[101,31,88,27],[101,32,88,28,"toISOString"],[101,43,88,39],[101,44,88,40],[102,8,89,4],[102,9,89,5],[102,11,89,7],[103,10,89,9,"merge"],[103,15,89,14],[103,17,89,16],[104,8,89,21],[104,9,89,22],[104,10,89,23],[105,8,90,4,"console"],[105,15,90,11],[105,16,90,12,"log"],[105,19,90,15],[105,20,90,16],[105,55,90,51],[105,56,90,52],[106,6,91,2],[106,7,91,3],[106,8,91,4],[106,15,91,11,"error"],[106,20,91,16],[106,22,91,18],[107,8,92,4,"console"],[107,15,92,11],[107,16,92,12,"error"],[107,21,92,17],[107,22,92,18],[107,52,92,48],[107,54,92,50,"error"],[107,59,92,55],[107,60,92,56],[109,8,94,4],[110,8,95,4],[110,12,95,8,"error"],[110,17,95,13],[110,18,95,14,"code"],[110,22,95,18],[110,27,95,23],[110,40,95,36],[110,42,95,38],[111,10,96,6],[111,16,96,12],[111,20,96,16,"Error"],[111,25,96,21],[111,26,96,22],[111,95,96,91],[111,96,96,92],[112,8,97,4],[112,9,97,5],[112,15,97,11],[112,19,97,15,"error"],[112,24,97,20],[112,25,97,21,"code"],[112,29,97,25],[112,34,97,30],[112,53,97,49],[112,55,97,51],[113,10,98,6],[113,16,98,12],[113,20,98,16,"Error"],[113,25,98,21],[113,26,98,22],[113,85,98,81],[113,86,98,82],[114,8,99,4],[115,8,101,4],[115,14,101,10,"error"],[115,19,101,15],[116,6,102,2],[117,4,103,0],[117,5,103,1],[118,4,103,1],[118,20,83,13,"updateUserDetails"],[118,37,83,30,"updateUserDetails"],[118,38,83,30,"_x4"],[118,41,83,30],[118,43,83,30,"_x5"],[118,46,83,30],[119,6,83,30],[119,13,83,30,"_ref3"],[119,18,83,30],[119,19,83,30,"apply"],[119,24,83,30],[119,31,83,30,"arguments"],[119,40,83,30],[120,4,83,30],[121,2,83,30],[121,5,103,1],[123,2,105,0],[124,0,106,0],[125,0,107,0],[126,0,108,0],[127,0,109,0],[128,0,110,0],[129,2,111,7],[129,6,111,13,"setUserRole"],[129,17,111,24],[129,20,111,24,"exports"],[129,27,111,24],[129,28,111,24,"setUserRole"],[129,39,111,24],[130,4,111,24],[130,8,111,24,"_ref4"],[130,13,111,24],[130,20,111,24,"_asyncToGenerator2"],[130,38,111,24],[130,39,111,24,"default"],[130,46,111,24],[130,48,111,27],[130,59,111,34,"uid"],[130,62,111,37],[130,64,111,39,"role"],[130,68,111,43],[130,70,111,48],[131,6,112,2],[131,10,112,6],[132,8,113,4],[132,12,113,10,"userRef"],[132,19,113,17],[132,22,113,20],[132,26,113,20,"doc"],[132,40,113,23],[132,42,113,24,"db"],[132,60,113,26],[132,62,113,28],[132,69,113,35],[132,71,113,37,"uid"],[132,74,113,40],[132,75,113,41],[133,8,114,4],[133,14,114,10],[133,18,114,10,"setDoc"],[133,35,114,16],[133,37,114,17,"userRef"],[133,44,114,24],[133,46,114,26],[134,10,115,6,"role"],[134,14,115,10],[134,16,115,12,"role"],[134,20,115,16],[135,10,116,6,"updatedAt"],[135,19,116,15],[135,21,116,17],[135,25,116,21,"Date"],[135,29,116,25],[135,30,116,26],[135,31,116,27],[135,32,116,28,"toISOString"],[135,43,116,39],[135,44,116,40],[136,8,117,4],[136,9,117,5],[136,11,117,7],[137,10,117,9,"merge"],[137,15,117,14],[137,17,117,16],[138,8,117,21],[138,9,117,22],[138,10,117,23],[139,8,118,4,"console"],[139,15,118,11],[139,16,118,12,"log"],[139,19,118,15],[139,20,118,16],[139,56,118,52],[139,58,118,54,"role"],[139,62,118,58],[139,63,118,59],[140,6,119,2],[140,7,119,3],[140,8,119,4],[140,15,119,11,"error"],[140,20,119,16],[140,22,119,18],[141,8,120,4,"console"],[141,15,120,11],[141,16,120,12,"error"],[141,21,120,17],[141,22,120,18],[141,48,120,44],[141,50,120,46,"error"],[141,55,120,51],[141,56,120,52],[142,8,121,4],[142,14,121,10,"error"],[142,19,121,15],[143,6,122,2],[144,4,123,0],[144,5,123,1],[145,4,123,1],[145,20,111,13,"setUserRole"],[145,31,111,24,"setUserRole"],[145,32,111,24,"_x6"],[145,35,111,24],[145,37,111,24,"_x7"],[145,40,111,24],[146,6,111,24],[146,13,111,24,"_ref4"],[146,18,111,24],[146,19,111,24,"apply"],[146,24,111,24],[146,31,111,24,"arguments"],[146,40,111,24],[147,4,111,24],[148,2,111,24],[148,5,123,1],[149,0,123,2],[149,3]],"functionMap":{"names":["<global>","saveUserDetails","getUserDetails","updateUserDetails","setUserRole"],"mappings":"AAA;+BCS;CD+B;8BEO;CF2B;iCGQ;CHoB;2BIQ;CJY"}},"type":"js/module"}]}